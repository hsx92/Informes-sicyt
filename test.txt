from ref.models import Informe
from ref.generador import GeneradorInforme
import logging

# Para ver los logs informativos en la consola
logging.basicConfig(level=logging.INFO)

# Obtenemos el informe "Panorama Provincial"
informe_prueba = Informe.objects.get(nombre="Panorama Provincial")

# Definimos los parámetros de la prueba
params = {
    "provincia_id": 7, 
    "provincia_nombre": "Chaco",
    "anio": 2023,
}

generador = GeneradorInforme(informe_id=informe_prueba.id)

# Ejecutamos la generación
print("\n--- Iniciando la prueba de generación del informe con SQL corregido... ---")
resultados = generador.generar(params=params)